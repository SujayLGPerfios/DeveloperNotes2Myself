# Description: Custom Components

### Custom Components
* In spite of having a huge number of built-in components, it would still make sense to create custom component.
* Custom component helps in reusing code across projects, customize an existing component or provide a simplified 
  interface to an existing system. 
* Behind the scenes, all components are just Processors with a bunch of lifecycle support around them.  Beans and 
  Processors are simple, streamlined and easy to manage.

### Generate Stub Code for Creating Camel Custom Component Using Maven
1. Create your own version of the Camel Component you can use the Camel Maven Archetypes.
2. This will create a maven project which contains a demo component.
3. Create your own custom component by modifying this demo component.
4. Move the `P017_custom` file to `META-INF/services/PACKAGE_NAME/FOO` where FOO is the URI scheme for your component 
   and any related endpoints created on the fly.
5. PACKAGE_NAME is your component's package name which has replaced the '.' with '/'.
```
mvn archetype:generate                   \
  -DarchetypeGroupId=org.apache.camel.archetypes  \
  -DarchetypeArtifactId=camel-archetype-component \
  -DarchetypeVersion=2.9.0  \
  -DgroupId=myGroupId                  \
  -DartifactId=myArtifactId
```

### Consumer Lifecycle
When you define a route `from("foo:123sdf").to("log:result");` that uses the new component as a consumer, it does the 
following 
1. Creates a CustomComponent instance (one per CamelContext).
2. Calls CustomComponent createEndpoint() with the given URI.
3. Creates a CustomEndpoint instance (one per route reference).
4. Creates a CustomConsumer instance (one per route reference)
5. Register the route with the CamelContext and call doStart() on the Consumer.
6. Consumers will then start in one of the following modes:
    - Event driven - wait for message to trigger route
    - Polling consumer - manually polls a resource for events
    - Scheduled polling consumer - events automatically generated by timer
    - custom threading - custom management of the event lifecyle

### Producer Lifecycle 
When you define a route `from("direct:start").to("foo:123");` that uses your new component as a producer, it does
the following
1. Creates a CustomComponent instance (one per CamelContext).
2. Calls CustomComponent createEndpoint() with the given URI.
3. Creates a CustomEndpoint instance (one per route reference).
4. Creates a CustomProducer instance (one per route reference).
5. Register the route with the CamelContext and start the route consumer.
6. The Producer's process(Exchange) method is then executed
    - Generally, this will decorate the Exchange by interfacing with some external resource (file, jms, database, etc).

### TODO
* None
